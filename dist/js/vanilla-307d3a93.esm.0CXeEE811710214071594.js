import{g as pe}from"./_commonjsHelpers.5-cIlDoe1710214071594.js";import{aQ as ke,bG as He}from"./vendor.8CtyBQ9Q1710214071594.js";function fe(p){throw new Error('Could not dynamically require "'+p+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Be={exports:{}};(function(p,c){(function(h){p.exports=h()})(function(){return function h(d,a,m){function S(T,x){if(!a[T]){if(!d[T]){var V=typeof fe=="function"&&fe;if(!x&&V)return V(T,!0);if(U)return U(T,!0);throw new Error("Cannot find module '"+T+"'")}x=a[T]={exports:{}},d[T][0].call(x.exports,function(k){var j=d[T][1][k];return S(j||k)},x,x.exports,h,d,a,m)}return a[T].exports}for(var U=typeof fe=="function"&&fe,P=0;P<m.length;P++)S(m[P]);return S}({1:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){var v=h("crypto");function C(s,g){g=I(s,g);var r;return(r=g.algorithm!=="passthrough"?v.createHash(g.algorithm):new O).write===void 0&&(r.write=r.update,r.end=r.update),M(g,r).dispatch(s),r.update||r.end(""),r.digest?r.digest(g.encoding==="buffer"?void 0:g.encoding):(s=r.read(),g.encoding!=="buffer"?s.toString(g.encoding):s)}(a=d.exports=C).sha1=function(s){return C(s)},a.keys=function(s){return C(s,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},a.MD5=function(s){return C(s,{algorithm:"md5",encoding:"hex"})},a.keysMD5=function(s){return C(s,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=v.getHashes?v.getHashes().slice():["sha1","md5"],b=(f.push("passthrough"),["buffer","hex","binary","base64"]);function I(s,g){var r={};if(r.algorithm=(g=g||{}).algorithm||"sha1",r.encoding=g.encoding||"hex",r.excludeValues=!!g.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=g.ignoreUnknown===!0,r.respectType=g.respectType!==!1,r.respectFunctionNames=g.respectFunctionNames!==!1,r.respectFunctionProperties=g.respectFunctionProperties!==!1,r.unorderedArrays=g.unorderedArrays===!0,r.unorderedSets=g.unorderedSets!==!1,r.unorderedObjects=g.unorderedObjects!==!1,r.replacer=g.replacer||void 0,r.excludeKeys=g.excludeKeys||void 0,s===void 0)throw new Error("Object argument required.");for(var o=0;o<f.length;++o)f[o].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=f[o]);if(f.indexOf(r.algorithm)===-1)throw new Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+f.join(", "));if(b.indexOf(r.encoding)===-1&&r.algorithm!=="passthrough")throw new Error('Encoding "'+r.encoding+'"  not supported. supported values: '+b.join(", "));return r}function w(s){if(typeof s=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(s))!=null}function M(s,g,r){r=r||[];function o(t){return g.update?g.update(t,"utf8"):g.write(t,"utf8")}return{dispatch:function(t){return this["_"+((t=s.replacer?s.replacer(t):t)===null?"null":typeof t)](t)},_object:function(t){var u,l=Object.prototype.toString.call(t),R=/\[object (.*)\]/i.exec(l);if(R=(R=R?R[1]:"unknown:["+l+"]").toLowerCase(),0<=(l=r.indexOf(t)))return this.dispatch("[CIRCULAR:"+l+"]");if(r.push(t),U!==void 0&&U.isBuffer&&U.isBuffer(t))return o("buffer:"),o(t);if(R==="object"||R==="function"||R==="asyncfunction")return l=Object.keys(t),s.unorderedObjects&&(l=l.sort()),s.respectType===!1||w(t)||l.splice(0,0,"prototype","__proto__","constructor"),s.excludeKeys&&(l=l.filter(function(L){return!s.excludeKeys(L)})),o("object:"+l.length+":"),u=this,l.forEach(function(L){u.dispatch(L),o(":"),s.excludeValues||u.dispatch(t[L]),o(",")});if(!this["_"+R]){if(s.ignoreUnknown)return o("["+R+"]");throw new Error('Unknown object type "'+R+'"')}this["_"+R](t)},_array:function(t,L){L=L!==void 0?L:s.unorderedArrays!==!1;var l=this;if(o("array:"+t.length+":"),!L||t.length<=1)return t.forEach(function(N){return l.dispatch(N)});var R=[],L=t.map(function(N){var D=new O,B=r.slice();return M(s,D,B).dispatch(N),R=R.concat(B.slice(r.length)),D.read().toString()});return r=r.concat(R),L.sort(),this._array(L,!1)},_date:function(t){return o("date:"+t.toJSON())},_symbol:function(t){return o("symbol:"+t.toString())},_error:function(t){return o("error:"+t.toString())},_boolean:function(t){return o("bool:"+t.toString())},_string:function(t){o("string:"+t.length+":"),o(t.toString())},_function:function(t){o("fn:"),w(t)?this.dispatch("[native]"):this.dispatch(t.toString()),s.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(t.name)),s.respectFunctionProperties&&this._object(t)},_number:function(t){return o("number:"+t.toString())},_xml:function(t){return o("xml:"+t.toString())},_null:function(){return o("Null")},_undefined:function(){return o("Undefined")},_regexp:function(t){return o("regex:"+t.toString())},_uint8array:function(t){return o("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return o("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return o("int8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return o("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return o("int16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return o("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return o("int32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return o("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return o("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return o("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return o("url:"+t.toString())},_map:function(t){return o("map:"),t=Array.from(t),this._array(t,s.unorderedSets!==!1)},_set:function(t){return o("set:"),t=Array.from(t),this._array(t,s.unorderedSets!==!1)},_file:function(t){return o("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(s.ignoreUnknown)return o("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return o("domwindow")},_bigint:function(t){return o("bigint:"+t.toString())},_process:function(){return o("process")},_timer:function(){return o("timer")},_pipe:function(){return o("pipe")},_tcp:function(){return o("tcp")},_udp:function(){return o("udp")},_tty:function(){return o("tty")},_statwatcher:function(){return o("statwatcher")},_securecontext:function(){return o("securecontext")},_connection:function(){return o("connection")},_zlib:function(){return o("zlib")},_context:function(){return o("context")},_nodescript:function(){return o("nodescript")},_httpparser:function(){return o("httpparser")},_dataview:function(){return o("dataview")},_signal:function(){return o("signal")},_fsevent:function(){return o("fsevent")},_tlswrap:function(){return o("tlswrap")}}}function O(){return{buf:"",write:function(s){this.buf+=s},end:function(s){this.buf+=s},read:function(){return this.buf}}}a.writeToStream=function(s,g,r){return r===void 0&&(r=g,g={}),M(g=I(s,g),r).dispatch(s)}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){(function(v){var C=typeof Uint8Array<"u"?Uint8Array:Array,f=43,b=47,I=48,w=97,M=65,O=45,s=95;function g(r){return r=r.charCodeAt(0),r===f||r===O?62:r===b||r===s?63:r<I?-1:r<I+10?r-I+26+26:r<M+26?r-M:r<w+26?r-w+26:void 0}v.toByteArray=function(r){var o,t;if(0<r.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var u=r.length,u=r.charAt(u-2)==="="?2:r.charAt(u-1)==="="?1:0,l=new C(3*r.length/4-u),R=0<u?r.length-4:r.length,L=0;function N(D){l[L++]=D}for(o=0;o<R;o+=4,0)N((16711680&(t=g(r.charAt(o))<<18|g(r.charAt(o+1))<<12|g(r.charAt(o+2))<<6|g(r.charAt(o+3))))>>16),N((65280&t)>>8),N(255&t);return u==2?N(255&(t=g(r.charAt(o))<<2|g(r.charAt(o+1))>>4)):u==1&&(N((t=g(r.charAt(o))<<10|g(r.charAt(o+1))<<4|g(r.charAt(o+2))>>2)>>8&255),N(255&t)),l},v.fromByteArray=function(r){var o,t,u,l,R=r.length%3,L="";function N(D){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(D)}for(o=0,u=r.length-R;o<u;o+=3)t=(r[o]<<16)+(r[o+1]<<8)+r[o+2],L+=N((l=t)>>18&63)+N(l>>12&63)+N(l>>6&63)+N(63&l);switch(R){case 1:L=(L+=N((t=r[r.length-1])>>2))+N(t<<4&63)+"==";break;case 2:L=(L=(L+=N((t=(r[r.length-2]<<8)+r[r.length-1])>>10))+N(t>>4&63))+N(t<<2&63)+"="}return L}})(a===void 0?this.base64js={}:a)}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(h,d,a){(function(m,S,f,P,T,x,V,k,j){var v=h("base64-js"),C=h("ieee754");function f(e,n,i){if(!(this instanceof f))return new f(e,n,i);var y,_,A,H,q=typeof e;if(n==="base64"&&q=="string")for(e=(H=e).trim?H.trim():H.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if(q=="number")y=G(e);else if(q=="string")y=f.byteLength(e,n);else{if(q!="object")throw new Error("First argument needs to be a number, array or string.");y=G(e.length)}if(f._useTypedArrays?_=f._augment(new Uint8Array(y)):((_=this).length=y,_._isBuffer=!0),f._useTypedArrays&&typeof e.byteLength=="number")_._set(e);else if(K(H=e)||f.isBuffer(H)||H&&typeof H=="object"&&typeof H.length=="number")for(A=0;A<y;A++)f.isBuffer(e)?_[A]=e.readUInt8(A):_[A]=e[A];else if(q=="string")_.write(e,0,n);else if(q=="number"&&!f._useTypedArrays&&!i)for(A=0;A<y;A++)_[A]=0;return _}function b(e,n,i,y){return f._charsWritten=le(function(_){for(var A=[],H=0;H<_.length;H++)A.push(255&_.charCodeAt(H));return A}(n),e,i,y)}function I(e,n,i,y){return f._charsWritten=le(function(_){for(var A,H,q=[],X=0;X<_.length;X++)H=_.charCodeAt(X),A=H>>8,H=H%256,q.push(H),q.push(A);return q}(n),e,i,y)}function w(e,n,i){var y="";i=Math.min(e.length,i);for(var _=n;_<i;_++)y+=String.fromCharCode(e[_]);return y}function M(e,n,i,A){A||(E(typeof i=="boolean","missing or invalid endian"),E(n!=null,"missing offset"),E(n+1<e.length,"Trying to read beyond buffer length"));var _,A=e.length;if(!(A<=n))return i?(_=e[n],n+1<A&&(_|=e[n+1]<<8)):(_=e[n]<<8,n+1<A&&(_|=e[n+1])),_}function O(e,n,i,A){A||(E(typeof i=="boolean","missing or invalid endian"),E(n!=null,"missing offset"),E(n+3<e.length,"Trying to read beyond buffer length"));var _,A=e.length;if(!(A<=n))return i?(n+2<A&&(_=e[n+2]<<16),n+1<A&&(_|=e[n+1]<<8),_|=e[n],n+3<A&&(_+=e[n+3]<<24>>>0)):(n+1<A&&(_=e[n+1]<<16),n+2<A&&(_|=e[n+2]<<8),n+3<A&&(_|=e[n+3]),_+=e[n]<<24>>>0),_}function s(e,n,i,y){if(y||(E(typeof i=="boolean","missing or invalid endian"),E(n!=null,"missing offset"),E(n+1<e.length,"Trying to read beyond buffer length")),!(e.length<=n))return y=M(e,n,i,!0),32768&y?-1*(65535-y+1):y}function g(e,n,i,y){if(y||(E(typeof i=="boolean","missing or invalid endian"),E(n!=null,"missing offset"),E(n+3<e.length,"Trying to read beyond buffer length")),!(e.length<=n))return y=O(e,n,i,!0),2147483648&y?-1*(4294967295-y+1):y}function r(e,n,i,y){return y||(E(typeof i=="boolean","missing or invalid endian"),E(n+3<e.length,"Trying to read beyond buffer length")),C.read(e,n,i,23,4)}function o(e,n,i,y){return y||(E(typeof i=="boolean","missing or invalid endian"),E(n+7<e.length,"Trying to read beyond buffer length")),C.read(e,n,i,52,8)}function t(e,n,i,y,_){if(_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+1<e.length,"trying to write beyond buffer length"),he(n,65535)),_=e.length,!(_<=i))for(var A=0,H=Math.min(_-i,2);A<H;A++)e[i+A]=(n&255<<8*(y?A:1-A))>>>8*(y?A:1-A)}function u(e,n,i,y,_){if(_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+3<e.length,"trying to write beyond buffer length"),he(n,4294967295)),_=e.length,!(_<=i))for(var A=0,H=Math.min(_-i,4);A<H;A++)e[i+A]=n>>>8*(y?A:3-A)&255}function l(e,n,i,y,_){_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+1<e.length,"Trying to write beyond buffer length"),ge(n,32767,-32768)),e.length<=i||t(e,0<=n?n:65535+n+1,i,y,_)}function R(e,n,i,y,_){_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+3<e.length,"Trying to write beyond buffer length"),ge(n,2147483647,-2147483648)),e.length<=i||u(e,0<=n?n:4294967295+n+1,i,y,_)}function L(e,n,i,y,_){_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+3<e.length,"Trying to write beyond buffer length"),Me(n,34028234663852886e22,-34028234663852886e22)),e.length<=i||C.write(e,n,i,y,23,4)}function N(e,n,i,y,_){_||(E(n!=null,"missing value"),E(typeof y=="boolean","missing or invalid endian"),E(i!=null,"missing offset"),E(i+7<e.length,"Trying to write beyond buffer length"),Me(n,17976931348623157e292,-17976931348623157e292)),e.length<=i||C.write(e,n,i,y,52,8)}a.Buffer=f,a.SlowBuffer=f,a.INSPECT_MAX_BYTES=50,f.poolSize=8192,f._useTypedArrays=function(){try{var e=new ArrayBuffer(0),n=new Uint8Array(e);return n.foo=function(){return 42},n.foo()===42&&typeof n.subarray=="function"}catch(i){return!1}}(),f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.isBuffer=function(e){return!(e==null||!e._isBuffer)},f.byteLength=function(e,n){var i;switch(e+="",n||"utf8"){case"hex":i=e.length/2;break;case"utf8":case"utf-8":i=ne(e).length;break;case"ascii":case"binary":case"raw":i=e.length;break;case"base64":i=be(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=2*e.length;break;default:throw new Error("Unknown encoding")}return i},f.concat=function(e,n){if(E(K(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),e.length===0)return new f(0);if(e.length===1)return e[0];if(typeof n!="number")for(_=n=0;_<e.length;_++)n+=e[_].length;for(var i=new f(n),y=0,_=0;_<e.length;_++){var A=e[_];A.copy(i,y),y+=A.length}return i},f.prototype.write=function(e,n,i,y){isFinite(n)?isFinite(i)||(y=i,i=void 0):(X=y,y=n,n=i,i=X),n=Number(n)||0;var _,A,H,q,X=this.length-n;switch((!i||X<(i=Number(i)))&&(i=X),y=String(y||"utf8").toLowerCase()){case"hex":_=function(te,J,Z,$){Z=Number(Z)||0;var W=te.length-Z;(!$||W<($=Number($)))&&($=W),E((W=J.length)%2==0,"Invalid hex string"),W/2<$&&($=W/2);for(var ie=0;ie<$;ie++){var Se=parseInt(J.substr(2*ie,2),16);E(!isNaN(Se),"Invalid hex string"),te[Z+ie]=Se}return f._charsWritten=2*ie,ie}(this,e,n,i);break;case"utf8":case"utf-8":A=this,H=n,q=i,_=f._charsWritten=le(ne(e),A,H,q);break;case"ascii":case"binary":_=b(this,e,n,i);break;case"base64":A=this,H=n,q=i,_=f._charsWritten=le(be(e),A,H,q);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":_=I(this,e,n,i);break;default:throw new Error("Unknown encoding")}return _},f.prototype.toString=function(e,n,i){var y,_,A,H,q=this;if(e=String(e||"utf8").toLowerCase(),n=Number(n)||0,(i=i!==void 0?Number(i):q.length)===n)return"";switch(e){case"hex":y=function(X,te,J){var Z=X.length;(!te||te<0)&&(te=0),(!J||J<0||Z<J)&&(J=Z);for(var $="",W=te;W<J;W++)$+=z(X[W]);return $}(q,n,i);break;case"utf8":case"utf-8":y=function(X,te,J){var Z="",$="";J=Math.min(X.length,J);for(var W=te;W<J;W++)X[W]<=127?(Z+=we($)+String.fromCharCode(X[W]),$=""):$+="%"+X[W].toString(16);return Z+we($)}(q,n,i);break;case"ascii":case"binary":y=w(q,n,i);break;case"base64":_=q,H=i,y=(A=n)===0&&H===_.length?v.fromByteArray(_):v.fromByteArray(_.slice(A,H));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":y=function(X,te,J){for(var Z=X.slice(te,J),$="",W=0;W<Z.length;W+=2)$+=String.fromCharCode(Z[W]+256*Z[W+1]);return $}(q,n,i);break;default:throw new Error("Unknown encoding")}return y},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.copy=function(e,n,i,y){if(n=n||0,(y=y||y===0?y:this.length)!==(i=i||0)&&e.length!==0&&this.length!==0){E(i<=y,"sourceEnd < sourceStart"),E(0<=n&&n<e.length,"targetStart out of bounds"),E(0<=i&&i<this.length,"sourceStart out of bounds"),E(0<=y&&y<=this.length,"sourceEnd out of bounds"),y>this.length&&(y=this.length);var _=(y=e.length-n<y-i?e.length-n+i:y)-i;if(_<100||!f._useTypedArrays)for(var A=0;A<_;A++)e[A+n]=this[A+i];else e._set(this.subarray(i,i+_),n)}},f.prototype.slice=function(e,n){var i=this.length;if(e=B(e,i,0),n=B(n,i,i),f._useTypedArrays)return f._augment(this.subarray(e,n));for(var y=n-e,_=new f(y,void 0,!0),A=0;A<y;A++)_[A]=this[A+e];return _},f.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},f.prototype.set=function(e,n){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,n)},f.prototype.readUInt8=function(e,n){if(n||(E(e!=null,"missing offset"),E(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},f.prototype.readUInt16LE=function(e,n){return M(this,e,!0,n)},f.prototype.readUInt16BE=function(e,n){return M(this,e,!1,n)},f.prototype.readUInt32LE=function(e,n){return O(this,e,!0,n)},f.prototype.readUInt32BE=function(e,n){return O(this,e,!1,n)},f.prototype.readInt8=function(e,n){if(n||(E(e!=null,"missing offset"),E(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,n){return s(this,e,!0,n)},f.prototype.readInt16BE=function(e,n){return s(this,e,!1,n)},f.prototype.readInt32LE=function(e,n){return g(this,e,!0,n)},f.prototype.readInt32BE=function(e,n){return g(this,e,!1,n)},f.prototype.readFloatLE=function(e,n){return r(this,e,!0,n)},f.prototype.readFloatBE=function(e,n){return r(this,e,!1,n)},f.prototype.readDoubleLE=function(e,n){return o(this,e,!0,n)},f.prototype.readDoubleBE=function(e,n){return o(this,e,!1,n)},f.prototype.writeUInt8=function(e,n,i){i||(E(e!=null,"missing value"),E(n!=null,"missing offset"),E(n<this.length,"trying to write beyond buffer length"),he(e,255)),n>=this.length||(this[n]=e)},f.prototype.writeUInt16LE=function(e,n,i){t(this,e,n,!0,i)},f.prototype.writeUInt16BE=function(e,n,i){t(this,e,n,!1,i)},f.prototype.writeUInt32LE=function(e,n,i){u(this,e,n,!0,i)},f.prototype.writeUInt32BE=function(e,n,i){u(this,e,n,!1,i)},f.prototype.writeInt8=function(e,n,i){i||(E(e!=null,"missing value"),E(n!=null,"missing offset"),E(n<this.length,"Trying to write beyond buffer length"),ge(e,127,-128)),n>=this.length||(0<=e?this.writeUInt8(e,n,i):this.writeUInt8(255+e+1,n,i))},f.prototype.writeInt16LE=function(e,n,i){l(this,e,n,!0,i)},f.prototype.writeInt16BE=function(e,n,i){l(this,e,n,!1,i)},f.prototype.writeInt32LE=function(e,n,i){R(this,e,n,!0,i)},f.prototype.writeInt32BE=function(e,n,i){R(this,e,n,!1,i)},f.prototype.writeFloatLE=function(e,n,i){L(this,e,n,!0,i)},f.prototype.writeFloatBE=function(e,n,i){L(this,e,n,!1,i)},f.prototype.writeDoubleLE=function(e,n,i){N(this,e,n,!0,i)},f.prototype.writeDoubleBE=function(e,n,i){N(this,e,n,!1,i)},f.prototype.fill=function(e,n,i){if(n=n||0,i=i||this.length,E(typeof(e=typeof(e=e||0)=="string"?e.charCodeAt(0):e)=="number"&&!isNaN(e),"value is not a number"),E(n<=i,"end < start"),i!==n&&this.length!==0){E(0<=n&&n<this.length,"start out of bounds"),E(0<=i&&i<=this.length,"end out of bounds");for(var y=n;y<i;y++)this[y]=e}},f.prototype.inspect=function(){for(var e=[],n=this.length,i=0;i<n;i++)if(e[i]=z(this[i]),i===a.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},f.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(f._useTypedArrays)return new f(this).buffer;for(var e=new Uint8Array(this.length),n=0,i=e.length;n<i;n+=1)e[n]=this[n];return e.buffer};var D=f.prototype;function B(e,n,i){return typeof e!="number"?i:n<=(e=~~e)?n:0<=e||0<=(e+=n)?e:0}function G(e){return(e=~~Math.ceil(+e))<0?0:e}function K(e){return(Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"})(e)}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function ne(e){for(var n=[],i=0;i<e.length;i++){var y=e.charCodeAt(i);if(y<=127)n.push(e.charCodeAt(i));else for(var _=i,A=(55296<=y&&y<=57343&&i++,encodeURIComponent(e.slice(_,i+1)).substr(1).split("%")),H=0;H<A.length;H++)n.push(parseInt(A[H],16))}return n}function be(e){return v.toByteArray(e)}function le(e,n,i,y){for(var _=0;_<y&&!(_+i>=n.length||_>=e.length);_++)n[_+i]=e[_];return _}function we(e){try{return decodeURIComponent(e)}catch(n){return"ï¿½"}}function he(e,n){E(typeof e=="number","cannot write a non-number as a number"),E(0<=e,"specified a negative value for writing an unsigned value"),E(e<=n,"value is larger than maximum value for type"),E(Math.floor(e)===e,"value has a fractional component")}function ge(e,n,i){E(typeof e=="number","cannot write a non-number as a number"),E(e<=n,"value larger than maximum allowed value"),E(i<=e,"value smaller than minimum allowed value"),E(Math.floor(e)===e,"value has a fractional component")}function Me(e,n,i){E(typeof e=="number","cannot write a non-number as a number"),E(e<=n,"value larger than maximum allowed value"),E(i<=e,"value smaller than minimum allowed value")}function E(e,n){if(!e)throw new Error(n||"Failed assertion")}f._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=D.get,e.set=D.set,e.write=D.write,e.toString=D.toString,e.toLocaleString=D.toString,e.toJSON=D.toJSON,e.copy=D.copy,e.slice=D.slice,e.readUInt8=D.readUInt8,e.readUInt16LE=D.readUInt16LE,e.readUInt16BE=D.readUInt16BE,e.readUInt32LE=D.readUInt32LE,e.readUInt32BE=D.readUInt32BE,e.readInt8=D.readInt8,e.readInt16LE=D.readInt16LE,e.readInt16BE=D.readInt16BE,e.readInt32LE=D.readInt32LE,e.readInt32BE=D.readInt32BE,e.readFloatLE=D.readFloatLE,e.readFloatBE=D.readFloatBE,e.readDoubleLE=D.readDoubleLE,e.readDoubleBE=D.readDoubleBE,e.writeUInt8=D.writeUInt8,e.writeUInt16LE=D.writeUInt16LE,e.writeUInt16BE=D.writeUInt16BE,e.writeUInt32LE=D.writeUInt32LE,e.writeUInt32BE=D.writeUInt32BE,e.writeInt8=D.writeInt8,e.writeInt16LE=D.writeInt16LE,e.writeInt16BE=D.writeInt16BE,e.writeInt32LE=D.writeInt32LE,e.writeInt32BE=D.writeInt32BE,e.writeFloatLE=D.writeFloatLE,e.writeFloatBE=D.writeFloatBE,e.writeDoubleLE=D.writeDoubleLE,e.writeDoubleBE=D.writeDoubleBE,e.fill=D.fill,e.inspect=D.inspect,e.toArrayBuffer=D.toArrayBuffer,e}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(h,d,a){(function(m,S,v,P,T,x,V,k,j){var v=h("buffer").Buffer,C=4,f=new v(C);f.fill(0),d.exports={hash:function(b,I,w,M){for(var O=I(function(t,u){t.length%C!=0&&(l=t.length+(C-t.length%C),t=v.concat([t,f],l));for(var l,R=[],L=u?t.readInt32BE:t.readInt32LE,N=0;N<t.length;N+=C)R.push(L.call(t,N));return R}(b=v.isBuffer(b)?b:new v(b),M),8*b.length),I=M,s=new v(w),g=I?s.writeInt32BE:s.writeInt32LE,r=0;r<O.length;r++)g.call(s,O[r],4*r,!0);return s}}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(h,d,a){(function(m,S,v,P,T,x,V,k,j){var v=h("buffer").Buffer,C=h("./sha"),f=h("./sha256"),b=h("./rng"),I={sha1:C,sha256:f,md5:h("./md5")},w=64,M=new v(w);function O(t,u){var l=I[t=t||"sha1"],R=[];return l||s("algorithm:",t,"is not yet supported"),{update:function(L){return v.isBuffer(L)||(L=new v(L)),R.push(L),L.length,this},digest:function(L){var N=v.concat(R),N=u?function(D,B,G){v.isBuffer(B)||(B=new v(B)),v.isBuffer(G)||(G=new v(G)),B.length>w?B=D(B):B.length<w&&(B=v.concat([B,M],w));for(var K=new v(w),z=new v(w),ne=0;ne<w;ne++)K[ne]=54^B[ne],z[ne]=92^B[ne];return G=D(v.concat([K,G])),D(v.concat([z,G]))}(l,u,N):l(N);return R=null,L?N.toString(L):N}}}function s(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}M.fill(0),a.createHash=function(t){return O(t)},a.createHmac=O,a.randomBytes=function(t,u){if(!u||!u.call)return new v(b(t));try{u.call(this,void 0,new v(b(t)))}catch(l){u(l)}};var g,r=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],o=function(t){a[t]=function(){s("sorry,",t,"is not implemented yet")}};for(g in r)o(r[g])}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){var v=h("./helpers");function C(s,g){s[g>>5]|=128<<g%32,s[14+(g+64>>>9<<4)]=g;for(var r=1732584193,o=-271733879,t=-1732584194,u=271733878,l=0;l<s.length;l+=16){var R=r,L=o,N=t,D=u,r=b(r,o,t,u,s[l+0],7,-680876936),u=b(u,r,o,t,s[l+1],12,-389564586),t=b(t,u,r,o,s[l+2],17,606105819),o=b(o,t,u,r,s[l+3],22,-1044525330);r=b(r,o,t,u,s[l+4],7,-176418897),u=b(u,r,o,t,s[l+5],12,1200080426),t=b(t,u,r,o,s[l+6],17,-1473231341),o=b(o,t,u,r,s[l+7],22,-45705983),r=b(r,o,t,u,s[l+8],7,1770035416),u=b(u,r,o,t,s[l+9],12,-1958414417),t=b(t,u,r,o,s[l+10],17,-42063),o=b(o,t,u,r,s[l+11],22,-1990404162),r=b(r,o,t,u,s[l+12],7,1804603682),u=b(u,r,o,t,s[l+13],12,-40341101),t=b(t,u,r,o,s[l+14],17,-1502002290),r=I(r,o=b(o,t,u,r,s[l+15],22,1236535329),t,u,s[l+1],5,-165796510),u=I(u,r,o,t,s[l+6],9,-1069501632),t=I(t,u,r,o,s[l+11],14,643717713),o=I(o,t,u,r,s[l+0],20,-373897302),r=I(r,o,t,u,s[l+5],5,-701558691),u=I(u,r,o,t,s[l+10],9,38016083),t=I(t,u,r,o,s[l+15],14,-660478335),o=I(o,t,u,r,s[l+4],20,-405537848),r=I(r,o,t,u,s[l+9],5,568446438),u=I(u,r,o,t,s[l+14],9,-1019803690),t=I(t,u,r,o,s[l+3],14,-187363961),o=I(o,t,u,r,s[l+8],20,1163531501),r=I(r,o,t,u,s[l+13],5,-1444681467),u=I(u,r,o,t,s[l+2],9,-51403784),t=I(t,u,r,o,s[l+7],14,1735328473),r=w(r,o=I(o,t,u,r,s[l+12],20,-1926607734),t,u,s[l+5],4,-378558),u=w(u,r,o,t,s[l+8],11,-2022574463),t=w(t,u,r,o,s[l+11],16,1839030562),o=w(o,t,u,r,s[l+14],23,-35309556),r=w(r,o,t,u,s[l+1],4,-1530992060),u=w(u,r,o,t,s[l+4],11,1272893353),t=w(t,u,r,o,s[l+7],16,-155497632),o=w(o,t,u,r,s[l+10],23,-1094730640),r=w(r,o,t,u,s[l+13],4,681279174),u=w(u,r,o,t,s[l+0],11,-358537222),t=w(t,u,r,o,s[l+3],16,-722521979),o=w(o,t,u,r,s[l+6],23,76029189),r=w(r,o,t,u,s[l+9],4,-640364487),u=w(u,r,o,t,s[l+12],11,-421815835),t=w(t,u,r,o,s[l+15],16,530742520),r=M(r,o=w(o,t,u,r,s[l+2],23,-995338651),t,u,s[l+0],6,-198630844),u=M(u,r,o,t,s[l+7],10,1126891415),t=M(t,u,r,o,s[l+14],15,-1416354905),o=M(o,t,u,r,s[l+5],21,-57434055),r=M(r,o,t,u,s[l+12],6,1700485571),u=M(u,r,o,t,s[l+3],10,-1894986606),t=M(t,u,r,o,s[l+10],15,-1051523),o=M(o,t,u,r,s[l+1],21,-2054922799),r=M(r,o,t,u,s[l+8],6,1873313359),u=M(u,r,o,t,s[l+15],10,-30611744),t=M(t,u,r,o,s[l+6],15,-1560198380),o=M(o,t,u,r,s[l+13],21,1309151649),r=M(r,o,t,u,s[l+4],6,-145523070),u=M(u,r,o,t,s[l+11],10,-1120210379),t=M(t,u,r,o,s[l+2],15,718787259),o=M(o,t,u,r,s[l+9],21,-343485551),r=O(r,R),o=O(o,L),t=O(t,N),u=O(u,D)}return Array(r,o,t,u)}function f(s,g,r,o,t,u){return O((g=O(O(g,s),O(o,u)))<<t|g>>>32-t,r)}function b(s,g,r,o,t,u,l){return f(g&r|~g&o,s,g,t,u,l)}function I(s,g,r,o,t,u,l){return f(g&o|r&~o,s,g,t,u,l)}function w(s,g,r,o,t,u,l){return f(g^r^o,s,g,t,u,l)}function M(s,g,r,o,t,u,l){return f(r^(g|~o),s,g,t,u,l)}function O(s,g){var r=(65535&s)+(65535&g);return(s>>16)+(g>>16)+(r>>16)<<16|65535&r}d.exports=function(s){return v.hash(s,C,16)}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){d.exports=function(v){for(var C,f=new Array(v),b=0;b<v;b++)!(3&b)&&(C=4294967296*Math.random()),f[b]=C>>>((3&b)<<3)&255;return f}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){var v=h("./helpers");function C(I,w){I[w>>5]|=128<<24-w%32,I[15+(w+64>>9<<4)]=w;for(var M,O,s,g=Array(80),r=1732584193,o=-271733879,t=-1732584194,u=271733878,l=-1009589776,R=0;R<I.length;R+=16){for(var L=r,N=o,D=t,B=u,G=l,K=0;K<80;K++){g[K]=K<16?I[R+K]:b(g[K-3]^g[K-8]^g[K-14]^g[K-16],1);var z=f(f(b(r,5),(z=o,O=t,s=u,(M=K)<20?z&O|~z&s:!(M<40)&&M<60?z&O|z&s|O&s:z^O^s)),f(f(l,g[K]),(M=K)<20?1518500249:M<40?1859775393:M<60?-1894007588:-899497514)),l=u,u=t,t=b(o,30),o=r,r=z}r=f(r,L),o=f(o,N),t=f(t,D),u=f(u,B),l=f(l,G)}return Array(r,o,t,u,l)}function f(I,w){var M=(65535&I)+(65535&w);return(I>>16)+(w>>16)+(M>>16)<<16|65535&M}function b(I,w){return I<<w|I>>>32-w}d.exports=function(I){return v.hash(I,C,20,!0)}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){function v(w,M){var O=(65535&w)+(65535&M);return(w>>16)+(M>>16)+(O>>16)<<16|65535&O}function C(w,M){var O,s=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),g=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),r=new Array(64);w[M>>5]|=128<<24-M%32,w[15+(M+64>>9<<4)]=M;for(var o,t,u=0;u<w.length;u+=16){for(var l=g[0],R=g[1],L=g[2],N=g[3],D=g[4],B=g[5],G=g[6],K=g[7],z=0;z<64;z++)r[z]=z<16?w[z+u]:v(v(v((t=r[z-2],b(t,17)^b(t,19)^I(t,10)),r[z-7]),(t=r[z-15],b(t,7)^b(t,18)^I(t,3))),r[z-16]),O=v(v(v(v(K,b(t=D,6)^b(t,11)^b(t,25)),D&B^~D&G),s[z]),r[z]),o=v(b(o=l,2)^b(o,13)^b(o,22),l&R^l&L^R&L),K=G,G=B,B=D,D=v(N,O),N=L,L=R,R=l,l=v(O,o);g[0]=v(l,g[0]),g[1]=v(R,g[1]),g[2]=v(L,g[2]),g[3]=v(N,g[3]),g[4]=v(D,g[4]),g[5]=v(B,g[5]),g[6]=v(G,g[6]),g[7]=v(K,g[7])}return g}var f=h("./helpers"),b=function(w,M){return w>>>M|w<<32-M},I=function(w,M){return w>>>M};d.exports=function(w){return f.hash(w,C,32,!0)}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){a.read=function(v,C,f,b,u){var w,M,O=8*u-b-1,s=(1<<O)-1,g=s>>1,r=-7,o=f?u-1:0,t=f?-1:1,u=v[C+o];for(o+=t,w=u&(1<<-r)-1,u>>=-r,r+=O;0<r;w=256*w+v[C+o],o+=t,r-=8);for(M=w&(1<<-r)-1,w>>=-r,r+=b;0<r;M=256*M+v[C+o],o+=t,r-=8);if(w===0)w=1-g;else{if(w===s)return M?NaN:1/0*(u?-1:1);M+=Math.pow(2,b),w-=g}return(u?-1:1)*M*Math.pow(2,w-b)},a.write=function(v,C,f,b,I,l){var M,O,s=8*l-I-1,g=(1<<s)-1,r=g>>1,o=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,t=b?0:l-1,u=b?1:-1,l=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(O=isNaN(C)?1:0,M=g):(M=Math.floor(Math.log(C)/Math.LN2),C*(b=Math.pow(2,-M))<1&&(M--,b*=2),2<=(C+=1<=M+r?o/b:o*Math.pow(2,1-r))*b&&(M++,b/=2),g<=M+r?(O=0,M=g):1<=M+r?(O=(C*b-1)*Math.pow(2,I),M+=r):(O=C*Math.pow(2,r-1)*Math.pow(2,I),M=0));8<=I;v[f+t]=255&O,t+=u,O/=256,I-=8);for(M=M<<I|O,s+=I;0<s;v[f+t]=255&M,t+=u,M/=256,s-=8);v[f+t-u]|=128*l}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(h,d,a){(function(m,S,U,P,T,x,V,k,j){var v,C,f;function b(){}(m=d.exports={}).nextTick=(C=typeof window<"u"&&window.setImmediate,f=typeof window<"u"&&window.postMessage&&window.addEventListener,C?function(I){return window.setImmediate(I)}:f?(v=[],window.addEventListener("message",function(I){var w=I.source;w!==window&&w!==null||I.data!=="process-tick"||(I.stopPropagation(),0<v.length&&v.shift()())},!0),function(I){v.push(I),window.postMessage("process-tick","*")}):function(I){setTimeout(I,0)}),m.title="browser",m.browser=!0,m.env={},m.argv=[],m.on=b,m.addListener=b,m.once=b,m.off=b,m.removeListener=b,m.removeAllListeners=b,m.emit=b,m.binding=function(I){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(I){throw new Error("process.chdir is not supported")}}).call(this,h("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},h("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Be);var Ve=Be.exports;const ze=pe(Ve);var Fe=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],Ye=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],Ue=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Ke=Fe,Ge=Ke.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),ye=Ue;ye=ye.slice().filter(function(p){return!/^(gl\_|texture)/.test(p)});var qe=ye.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),We=ot,Xe=Fe,xe=Ye,$e=Ue,Je=Ge,Ze=qe,re=999,Ee=9999,me=0,_e=1,Ie=2,Ae=3,Ce=4,ue=5,Qe=6,et=7,tt=8,De=9,rt=10,Te=11,nt=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function ot(p){var c=0,h=0,d=re,a,m,S=[],U=[],P=1,T=0,x=0,V=!1,k=!1,j="",v;p=p||{};var C=$e,f=Xe;p.version==="300 es"&&(C=Ze,f=Je);for(var b={},I={},c=0;c<C.length;c++)b[C[c]]=!0;for(var c=0;c<f.length;c++)I[f[c]]=!0;return function(B){return U=[],B!==null?M(B):O()};function w(B){B.length&&U.push({type:nt[d],data:B,position:x,line:P,column:T})}function M(B){c=0,B.toString&&(B=B.toString()),j+=B.replace(/\r\n/g,"\n"),v=j.length;for(var G;a=j[c],c<v;){switch(G=c,d){case me:c=t();break;case _e:c=o();break;case Ie:c=r();break;case Ae:c=u();break;case Ce:c=L();break;case Te:c=R();break;case ue:c=N();break;case Ee:c=D();break;case De:c=g();break;case re:c=s();break}if(G!==c)switch(j[G]){case"\n":T=0,++P;break;default:++T;break}}return h+=c,j=j.slice(c),U}function O(B){return S.length&&w(S.join("")),d=rt,w("(eof)"),U}function s(){return S=S.length?[]:S,m==="/"&&a==="*"?(x=h+c-1,d=me,m=a,c+1):m==="/"&&a==="/"?(x=h+c-1,d=_e,m=a,c+1):a==="#"?(d=Ie,x=h+c,c):/\s/.test(a)?(d=De,x=h+c,c):(V=/\d/.test(a),k=/[^\w_]/.test(a),x=h+c,d=V?Ce:k?Ae:Ee,c)}function g(){return/[^\s]/g.test(a)?(w(S.join("")),d=re,c):(S.push(a),m=a,c+1)}function r(){return(a==="\r"||a==="\n")&&m!=="\\"?(w(S.join("")),d=re,c):(S.push(a),m=a,c+1)}function o(){return r()}function t(){return a==="/"&&m==="*"?(S.push(a),w(S.join("")),d=re,c+1):(S.push(a),m=a,c+1)}function u(){if(m==="."&&/\d/.test(a))return d=ue,c;if(m==="/"&&a==="*")return d=me,c;if(m==="/"&&a==="/")return d=_e,c;if(a==="."&&S.length){for(;l(S););return d=ue,c}if(a===";"||a===")"||a==="("){if(S.length)for(;l(S););return w(a),d=re,c+1}var B=S.length===2&&a!=="=";if(/[\w_\d\s]/.test(a)||B){for(;l(S););return d=re,c}return S.push(a),m=a,c+1}function l(B){var G=0,K,z;do{if(K=xe.indexOf(B.slice(0,B.length+G).join("")),z=xe[K],K===-1){if(G--+B.length>0)continue;z=B.slice(0,1).join("")}return w(z),x+=z.length,S=S.slice(z.length),S.length}while(!0)}function R(){return/[^a-fA-F0-9]/.test(a)?(w(S.join("")),d=re,c):(S.push(a),m=a,c+1)}function L(){return a==="."||/[eE]/.test(a)?(S.push(a),d=ue,m=a,c+1):a==="x"&&S.length===1&&S[0]==="0"?(d=Te,S.push(a),m=a,c+1):/[^\d]/.test(a)?(w(S.join("")),d=re,c):(S.push(a),m=a,c+1)}function N(){return a==="f"&&(S.push(a),m=a,c+=1),/[eE]/.test(a)||(a==="-"||a==="+")&&/[eE]/.test(m)?(S.push(a),m=a,c+1):/[^\d]/.test(a)?(w(S.join("")),d=re,c):(S.push(a),m=a,c+1)}function D(){if(/[^\d\w_]/.test(a)){var B=S.join("");return I[B]?d=tt:b[B]?d=et:d=Qe,w(S.join("")),d=re,c}return S.push(a),m=a,c+1}}var it=We,at=st;function st(p,c){var h=it(c),d=[];return d=d.concat(h(p)),d=d.concat(h(null)),d}const ut=pe(at);var ct=lt;function lt(p){for(var c=[],h=0;h<p.length;h++)p[h].type!=="eof"&&c.push(p[h].data);return c.join("")}const je=pe(ct);var ft=dt;function dt(p){var c=null,h=null,d=0,a=0,m=0,S=0,U=0,P=[],T,x,V;for(T=0,x;T<p.length;T++)if(V=p[T],V.data==="{"){if(d&&d++||(x=j(T,oe(")"),oe()),x<0)||(S=x,x=j(x,oe("("),oe(")")),x<0)||(U=x,x=j(x,ce),x<0)||p[x].type!=="ident"||(h=p[x].data,x=j(x,ce),x<0))continue;d=1,a=T,c=p[x].data,m=x;var k=j(x,ce);switch(p[k]&&p[k].data){case"lowp":case"highp":case"mediump":m=k}}else if(d&&V.data==="}"){if(--d)continue;P.push({name:h,type:c,body:[a+1,T],args:[U,S+1],outer:[m,T+1]})}for(T=0;T<p.length;T++)if(V=p[T],V.data===";"){if(x=j(T,oe(")"),oe()),x<0||(S=x,x=j(x,oe("("),oe(")")),x<0)||(U=x,x=j(x,ce),x<0)||p[x].type!=="ident"||(h=p[x].data,x=j(x,ce),x<0)||p[x].type==="operator"||p[x].data==="return")continue;c=p[x].data,P.push({name:h,type:c,body:!1,args:[U,S+1],outer:[x,T+1]})}return P.sort(function(v,C){return v.outer[0]-C.outer[0]});function j(v,C,f){for(var b=v-1;b>=0;b--){if(C(p[b]))return b;if(f&&f(p[b]))return-1}return-1}}function oe(p){return function(c){return c.type==="operator"&&(!p||c.data===p)}}function ce(p){return p.type!=="whitespace"}const pt=pe(ft);function ht(p,c){if(typeof p!="object"||p===null)return p;var h=p[Symbol.toPrimitive];if(h!==void 0){var d=h.call(p,c||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(p)}function Re(p){var c=ht(p,"string");return typeof c=="symbol"?c:String(c)}function Y(p,c,h){return c=Re(c),c in p?Object.defineProperty(p,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[c]=h,p}function Pe(p,c){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(p);c&&(d=d.filter(function(a){return Object.getOwnPropertyDescriptor(p,a).enumerable})),h.push.apply(h,d)}return h}function ae(p){for(var c=1;c<arguments.length;c++){var h=arguments[c]!=null?arguments[c]:{};c%2?Pe(Object(h),!0).forEach(function(d){Y(p,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(h)):Pe(Object(h)).forEach(function(d){Object.defineProperty(p,d,Object.getOwnPropertyDescriptor(h,d))})}return p}function gt(p,c){if(p==null)return{};var h={},d=Object.keys(p),a,m;for(m=0;m<d.length;m++)a=d[m],!(c.indexOf(a)>=0)&&(h[a]=p[a]);return h}function mt(p,c){if(p==null)return{};var h=gt(p,c),d,a;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);for(a=0;a<m.length;a++)d=m[a],!(c.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(p,d)&&(h[d]=p[d])}return h}function _t(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function Oe(p,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,Re(d.key),d)}}function yt(p,c,h){return c&&Oe(p.prototype,c),h&&Oe(p,h),Object.defineProperty(p,"prototype",{writable:!1}),p}function Ne(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function ve(p,c){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,a){return d.__proto__=a,d},ve(p,c)}function vt(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),c&&ve(p,c)}function de(p){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},de(p)}function bt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(p){return!1}}function wt(p,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ne(p)}function Mt(p){var c=bt();return function(){var d=de(p),a;if(c){var m=de(this).constructor;a=Reflect.construct(d,arguments,m)}else a=d.apply(this,arguments);return wt(this,a)}}var F={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},Q,se,St=(Q={},Y(Q,"".concat(F.normal),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(F.normal,";\n    #ifdef USE_TANGENT\n	    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),Y(Q,"".concat(F.position),{"#include <begin_vertex>":"\n    vec3 transformed = ".concat(F.position,";\n  ")}),Y(Q,"".concat(F.positionRaw),{"#include <begin_vertex>":"\n    vec4 csm_internal_positionUnprojected = ".concat(F.positionRaw,";\n    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;\n    vec3 transformed = csm_internal_positionUnprojected.xyz;\n  ")}),Y(Q,"".concat(F.pointSize),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(F.pointSize,";\n    ")}),Y(Q,"".concat(F.diffuseColor),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(F.diffuseColor,";\n  ")}),Y(Q,"".concat(F.fragColor),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(F.fragColor,";\n  ")}),Y(Q,"".concat(F.emissive),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(F.emissive,";\n    ")}),Y(Q,"".concat(F.roughness),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(F.roughness,";\n    ")}),Y(Q,"".concat(F.metalness),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(F.metalness,";\n    ")}),Y(Q,"".concat(F.ao),{"#include <aomap_fragment>":"\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= 1. - ".concat(F.ao,";\n    ")}),Y(Q,"".concat(F.bump),{"#include <normal_fragment_maps>":"\n    #include <normal_fragment_maps>\n\n    vec3 csm_internal_orthogonal = ".concat(F.bump," - (dot(").concat(F.bump,", normal) * normal);\n    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;\n    normal = normalize(normal - csm_internal_projectedbump);\n    ")}),Y(Q,"".concat(F.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":"\n      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * ".concat(F.depthAlpha," );\n    "),"gl_FragColor = packDepthToRGBA( fragCoordZ );":"\n      gl_FragColor = packDepthToRGBA( fragCoordZ );\n      gl_FragColor.a *= ".concat(F.depthAlpha,";\n    ")}),Q),xt=(se={},Y(se,"".concat(F.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(F.position,", 1.0 );\n  ")}),Y(se,"".concat(F.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = ".concat(F.position,";\n  ")}),Y(se,"".concat(F.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(F.diffuseColor,";\n  ")}),Y(se,"".concat(F.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(F.fragColor,";\n  ")}),se),Et="\n\n#ifdef IS_VERTEX\n    // csm_Position & csm_PositionRaw\n    #ifdef IS_UNKNOWN\n        vec3 csm_Position = vec3(0.0);\n        vec4 csm_PositionRaw = vec4(0.0);\n        vec3 csm_Normal = vec3(0.0);\n    #else\n        vec3 csm_Position = position;\n        vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n        vec3 csm_Normal = normal;\n    #endif\n\n    // csm_PointSize\n    #ifdef IS_POINTSMATERIAL\n        float csm_PointSize = size;\n    #endif\n#else\n    // csm_DiffuseColor & csm_FragColor\n    #if defined IS_UNKNOWN || defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_SHADOWMATERIAL\n        vec4 csm_DiffuseColor = vec4(1.0, 0.0, 1.0, 1.0);\n        vec4 csm_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\n    #else\n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vMapUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            vec4 csm_DiffuseColor = vec4(diffuse, opacity);\n            vec4 csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n\n    // csm_Emissive, csm_Roughness, csm_Metalness\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n        vec3 csm_Emissive = emissive;\n        float csm_Roughness = roughness;\n        float csm_Metalness = metalness;\n    #endif\n\n    // csm_AO\n    #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHBASICMATERIAL || defined IS_MESHLAMBERTMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHTOONMATERIAL\n        float csm_AO = 0.0;\n    #endif\n\n    // csm_Bump\n    #if defined IS_MESHLAMBERTMATERIAL || defined IS_MESHMATCAPMATERIAL || defined IS_MESHNORMALMATERIAL || defined IS_MESHPHONGMATERIAL || defined IS_MESHPHYSICALMATERIAL || defined IS_MESHSTANDARDMATERIAL || defined IS_MESHTOONMATERIAL || defined IS_SHADOWMATERIAL \n        vec3 csm_Bump = vec3(0.0);\n    #endif\n\n    float csm_DepthAlpha = 1.0;\n#endif\n",It="\n    varying mat4 csm_internal_vModelViewMatrix;\n",At="\n    csm_internal_vModelViewMatrix = modelViewMatrix;\n",Ct="\n    varying mat4 csm_internal_vModelViewMatrix;\n",Dt="\n    \n",ee,Tt=(ee={},Y(ee,"".concat(F.position),"*"),Y(ee,"".concat(F.positionRaw),"*"),Y(ee,"".concat(F.normal),"*"),Y(ee,"".concat(F.pointSize),["PointsMaterial"]),Y(ee,"".concat(F.diffuseColor),"*"),Y(ee,"".concat(F.fragColor),"*"),Y(ee,"".concat(F.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),Y(ee,"".concat(F.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Y(ee,"".concat(F.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),Y(ee,"".concat(F.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),Y(ee,"".concat(F.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),Y(ee,"".concat(F.depthAlpha),"*"),ee),jt=["baseMaterial","fragmentShader","vertexShader","uniforms","patchMap","cacheKey","silent"],Pt=function(c,h,d){return c.split(h).join(d)},Ot=function(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},Lt=function(c,h){return new RegExp("\\b".concat(Ot(h),"\\b")).test(c)};function Bt(p){try{new p}catch(c){if(c.message.indexOf("is not a constructor")>=0)return!1}return!0}function Ft(p,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Object.assign(p,c);var d=Object.getPrototypeOf(c);Object.entries(Object.getOwnPropertyDescriptors(d)).filter(function(a){var m=typeof a[1].get=="function",S=typeof a[1].set=="function",U=typeof a[1].value=="function",P=a[0]==="constructor";return(m||S||U)&&!P}).forEach(function(a){if(typeof p[a[0]]=="function"){h||console.warn("Function ".concat(a[0]," already exists on CSM, renaming to base_").concat(a[0]));var m="base_".concat(a[0]);p[m]=a[1].value.bind(p);return}Object.defineProperty(p,a[0],a[1])})}function Ut(p){var c=p.toString().trim(),h=c.substring(c.indexOf("{")+1,c.lastIndexOf("}"));return h.trim().length===0}function Le(p){return p.replace(/\s/g,"")}function Rt(p,c,h){var d=p.lastIndexOf(c);return d===-1?p:p.substring(0,d)+h+p.substring(d+c.length)}var Ht=function(p){vt(h,p);var c=Mt(h);function h(d){var a,m=d.baseMaterial,S=d.fragmentShader,U=d.vertexShader,P=d.uniforms,T=d.patchMap,x=d.cacheKey,V=d.silent,k=mt(d,jt);_t(this,h);var j;if(Bt(m)?j=new m(k):(j=m,Object.assign(j,k)),j.type==="RawShaderMaterial")throw new Error("CustomShaderMaterial does not support RawShaderMaterial");a=c.call(this),Ft(Ne(a),j,V),a.__csm={patchMap:T||{},fragmentShader:S||"",vertexShader:U||"",cacheKey:x,baseMaterial:m,instanceID:ke.generateUUID(),type:j.type,isAlreadyExtended:!Ut(j.onBeforeCompile),cacheHash:"",silent:V},a.uniforms=ae(ae({},a.uniforms||{}),P||{});{var v=a.__csm,C=v.fragmentShader,f=v.vertexShader,b=a.uniforms;a.__csm.cacheHash=a.getCacheHash(),a.generateMaterial(C,f,b)}return a}return yt(h,[{key:"update",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.uniforms=a.uniforms||this.uniforms,Object.assign(this.__csm,a);var m=this.__csm,S=m.fragmentShader,U=m.vertexShader,P=this.uniforms,T=this.getCacheHash();this.__csm.cacheHash=T,this.generateMaterial(S,U,P)}},{key:"clone",value:function(){var a={baseMaterial:this.__csm.baseMaterial,fragmentShader:this.__csm.fragmentShader,vertexShader:this.__csm.vertexShader,uniforms:this.uniforms,silent:this.__csm.silent,patchMap:this.__csm.patchMap,cacheKey:this.__csm.cacheKey},m=new this.constructor(a);return Object.assign(this,m),m}},{key:"getCacheHash",value:function(){var a=this.__csm,m=a.fragmentShader,S=a.vertexShader,U=this.uniforms,P=Object.values(U).reduce(function(x,V){var k=V.value;return x+JSON.stringify(k)},""),T=Le(m)+Le(S)+P;return T.trim().length>0?ze(T):this.customProgramCacheKey()}},{key:"generateMaterial",value:function(a,m,S){var U=this,P=this.parseShader(a),T=this.parseShader(m);this.uniforms=S||{},this.customProgramCacheKey=function(){return U.__csm.cacheHash};var x=function(j){try{if(P){var v=U.patchShader(P,j.fragmentShader,!0);j.fragmentShader=U.getMaterialDefine()+v}if(T){var C=U.patchShader(T,j.vertexShader);j.vertexShader="#define IS_VERTEX;\n"+C,j.vertexShader=U.getMaterialDefine()+j.vertexShader}j.uniforms=ae(ae({},j.uniforms),U.uniforms),U.uniforms=j.uniforms}catch(f){console.error(f)}};if(this.__csm.isAlreadyExtended){var V=this.onBeforeCompile;this.onBeforeCompile=function(k,j){V(k,j),x(k)}}else this.onBeforeCompile=x;this.needsUpdate=!0}},{key:"patchShader",value:function(a,m,S){var U=this,P=m,T=ae(ae({},this.getPatchMapForMaterial()),this.__csm.patchMap);Object.keys(T).forEach(function(k){Object.keys(T[k]).forEach(function(j){var v=Tt[k],C=U.__csm.type;if(k==="*"||Lt(a.main,k))if(!v||Array.isArray(v)&&v.includes(C)||v==="*")P=Pt(P,j,T[k][j]);else throw new Error("CSM: ".concat(k," is not available in ").concat(C,". Shader cannot compile."))})}),P=P.replace("void main() {","\n        #ifndef CSM_IS_HEAD_DEFAULTS_DEFINED\n          ".concat(S?Ct:It,"\n          #define CSM_IS_HEAD_DEFAULTS_DEFINED 1\n        #endif\n\n        ").concat(a.header,"\n        \n        void main() {\n          #ifndef CSM_IS_DEFAULTS_DEFINED\n            ").concat(Et,"\n            #define CSM_IS_DEFAULTS_DEFINED 1\n          #endif\n          \n          #ifndef CSM_IS_MAIN_DEFAULTS_DEFINED\n            ").concat(S?Dt:At,"\n            #define CSM_IS_MAIN_DEFAULTS_DEFINED 1\n          #endif\n\n          // CSM_START\n      "));var x=this.__csm.isAlreadyExtended,V=P.includes("// CSM_END");return x&&V?P=Rt(P,"// CSM_END","\n          // CSM_END\n          ".concat(a.main,"\n          // CSM_END\n        ")):P=P.replace("// CSM_START","\n        // CSM_START\n        ".concat(a.main,"\n        // CSM_END\n          ")),P=a.defines+P,P}},{key:"parseShader",value:function(a){if(a){var m=a.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),S=ut(m),U=pt(S),P=U.map(function(V){return V.name}).indexOf("main"),T=je(S.slice(0,P>=0?U[P].outer[0]:void 0)),x=P>=0?this.getShaderFromIndex(S,U[P].body):"";return{defines:"",header:T,main:x}}}},{key:"getMaterialDefine",value:function(){var a=this.__csm.type;return a?"#define IS_".concat(a.toUpperCase(),";\n"):"#define IS_UNKNOWN;\n"}},{key:"getPatchMapForMaterial",value:function(){switch(this.__csm.type){case"ShaderMaterial":return xt;default:return St}}},{key:"getShaderFromIndex",value:function(a,m){return je(a.slice(m[0],m[1]))}}]),h}(He);export{Ht as C};
